{% extends "core/seshat-base.html" %}
<!-- Crispy Tags -->
{% load crispy_forms_tags %} {% block content %}
<div class="category_div" id="category_div">
  Please specify Section:
  <select
    name="section"
    class="required-entry"
    id="section"
    onchange="javascript: dynamicdropdown(this.options[this.selectedIndex].value);"
  >
    <option value="">Select Section</option>
    {% for item in sectionOptions %}
    <option value="{{ item }}">{{ item }}</option>
    {% endfor %}
  </select>
</div>
<div class="sub_category_div" id="sub_category_div">
  Please select framework:
  <script type="text/javascript" language="JavaScript">
    document.write(
      '<select name="subsection" id="subsection"><option value="" >Please select Subsection</option></select>'
    );
  </script>
  <noscript>
    <select name="subsection" id="subsection">
      <option value="">Please select Subsection</option>
    </select>
  </noscript>
</div>

<!-- DropDown Stuff -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script language="javascript" type="text/javascript">
  function dynamicdropdown(selectedsection) {
  document.getElementById("subsection").length = 0;
  var select = document.getElementById("subsection");
  {% autoescape off %}
  var JSSelectoptions =  {{ sectionOptions }};
  {% endautoescape %}

  for (const [key, value] of Object.entries(JSSelectoptions)) {
      if (selectedsection == key){
          select.options[0]=new Option("Please select Subsection","");
          for (var i = 0; i < value.length; i++) {
              console.log(key);
              console.log(value[i]);
              select.options[select.options.length] = new Option(
                  value[i],
                  value[i]
              );
              }
      }
      }

  return true;
  }
</script>
{% endblock %}
